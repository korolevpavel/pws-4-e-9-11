{% extends "bootstrap/base.html" %}

{% block navbar %}
{% include "navbar.html" %}
{% endblock %}

{% block content %}

{% if current_user.is_authenticated %}
<table class="table table-striped table-dark">
    <tr>
        <td style="width: 10px;"> # </td>
        <td style="width: 100px;"> Создано </td>
        <td style="width: 100px;"> Крайний срок </td>
        <td style="width: 50px;"> Автор </td>
        <td style="width: 150px;"> Тема </td>
        <td style="width: 300px;"> Описание </td>
        <td style="width: 150px;"></td>
    </tr>
</table>
{% if events %}
{% for event in events %}
<table class="table table-striped table-light table-bordered">
    <tr>
        <td style="width: 10px;"> {{ event._id }}</td>
        <td style="width: 100px;"> {{ event.date_start }}</td>
        <td style="width: 100px;"> {{ event.date_end }}</td>
        <td style="width: 50px;"> {{ event.get_author() }}</td>
        <td style="width: 150px;"> {{ event.subject }}</td>
        {% if event.author == current_user.get_id() %}
        <td style="width: 300px;"> {{ event.description }}</td>
        <td style="width: 150px;"><a href="{{ url_for('edit_event', _method='GET', _id=event._id|int) }}"
                                     class="btn btn-secondary btn-block">Изменить</a></td>
        <td style="width: 150px;"><a href="{{ url_for('del_event', _method='GET', _id=event._id|int) }}"
                                     class="btn btn-danger btn-block">x</a></td>
        {% else %}
        <td style="width: 450px;"> {{ event.description }}</td>
        {% endif %}
    </tr>
</table>
{% endfor %}
{% else %}
<h2 style="display: flex; justify-content: center;">Событий не найдено. ¯\_(ツ)_/¯ </h2>
{% endif %}
{% endif %}

{% if not current_user.is_authenticated %}
<h2 style="display: flex; justify-content: center;">Авторизуйтесь, чтобы увидеть события.</h2>
{% endif %}

{% endblock content %}